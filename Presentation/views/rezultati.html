%rebase('osnova.html', naslov='Rezultati iskanja', stran='rezultati')

<h1 class="glavni-naslov">Rezultati iskanja</h1>

% if knjige:
    % # Najprej knjige, ki so na voljo
    % na_voljo = [k for k in knjige if k.razpolozljivost == 'na voljo']
    % ni_na_voljo = [k for k in knjige if k.razpolozljivost != 'na voljo']

    <div class="rezultati-grid">
        % for knjiga in na_voljo + ni_na_voljo:
            <div class="knjiga-kvadratek {{ 'na-voljo' if knjiga.razpolozljivost == 'na voljo' else 'ni-na-voljo' }}"
                 onclick="window.location.href='/knjiga/{{knjiga.id_knjige}}'">
                <h3>{{knjiga.naslov}}</h3>

                % if hasattr(knjiga, "avtorji") and knjiga.avtorji:
                    <p>Avtorji: {{", ".join([a.ime + " " + a.priimek for a in knjiga.avtorji])}}</p>
                % end

                % if hasattr(knjiga, "zanri") and knjiga.zanri:
                    <p>Žanri: {{", ".join([z.ime_zanra for z in knjiga.zanri])}}</p>
                % end

                <p>Razpoložljivost: {{knjiga.razpolozljivost}}</p>
            </div>
        % end
    </div>
% else:
    <p class="opis">Ni najdenih rezultatov za vaš iskalni poizvedek.</p>
% end
